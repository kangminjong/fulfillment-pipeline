{% extends "base.html" %}
{% block content %}

<div class="row row-cards">
  <div class="col-12 col-md-3">
    <div class="card">
      <div class="card-body">
        <div class="subheader">오늘 주문</div>
        <div class="h1 mb-0" id="kpi-orders-today">-</div>
      </div>
    </div>
  </div>
  <div class="col-12 col-md-3">
    <div class="card">
      <div class="card-body">
        <div class="subheader">오늘 출고</div>
        <div class="h1 mb-0" id="kpi-shipped-today">-</div>
      </div>
    </div>
  </div>
  <div class="col-12 col-md-3">
    <div class="card">
      <div class="card-body">
        <div class="subheader">미처리(결제완료)</div>
        <div class="h1 mb-0" id="kpi-backlog">-</div>
      </div>
    </div>
  </div>
  <div class="col-12 col-md-3">
    <div class="card">
      <div class="card-body">
        <div class="subheader">HOLD</div>
        <div class="h1 mb-0" id="kpi-holds-now">-</div>
      </div>
    </div>
  </div>
</div>

<div class="row row-cards mt-2">
  <div class="col-12 col-lg-12">
    <div class="card h-100">
      <div class="card-header">
        <h3 class="card-title">처리 추이(주문/출고/HOLD)</h3>
        <div class="ms-auto d-flex align-items-center gap-2">
          <select id="ts-preset-dashboard" class="form-select form-select-sm w-auto">
            <option value="12h_30m">최근 12시간(30분)</option>
            <option value="24h_1h" selected>최근 24시간(1시간)</option>
            <option value="7d_1d">최근 7일(1일)</option>
            <option value="30d_1d">최근 30일(1일)</option>
          </select>
          <div class="text-secondary small" id="chart-updated-at">-</div>
        </div>
      </div>
      <div class="card-body">
        <div style="height: 220px;">
          <canvas id="throughput-chart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="card mt-2">
  <div class="card-header">
    <h3 class="card-title">최근 주문</h3>
    <div class="ms-auto text-secondary small" id="orders-updated-at">-</div>
  </div>
  <div class="table-responsive">
    <table class="table card-table table-vcenter">
      <thead>
        <tr>
          <th>주문번호</th>
          <th>상태</th>
          <th>HOLD</th>
          <th>마지막 이벤트</th>
          <th>갱신</th>
          <th class="text-end">액션</th>
        </tr>
      </thead>
      <tbody id="orders-tbody"></tbody>
    </table>
  </div>
</div>

<div class="card mt-2">
  <div class="card-header">
    <h3 class="card-title">최근 알림(오류/홀드)</h3>
  </div>
  <div class="table-responsive">
    <table class="table card-table table-vcenter">
      <thead>
        <tr>
          <th>상태</th>
          <th>주문</th>
          <th>사유</th>
          <th>시각</th>
          <th>처리</th>
        </tr>
      </thead>
      <tbody id="alerts-tbody"></tbody>
    </table>
  </div>
</div>

{% endblock %}
